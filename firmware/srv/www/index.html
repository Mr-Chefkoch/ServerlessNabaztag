<html>
<head>
  <title>Nabaztag</title>
  <link rel="stylesheet" href="milligram.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<div class="container">
  <div class="row">
    <h1>Nabaztag</h1>
  </div>

  <div class="row">
    <div class="column">
      <h2>Taichi</h2>
      <ul>
      <li><a href="/taichi?v=1000">Do taichi now</a></li>
      <li><a href="/taichi?v=0">Set taichi off</a></li>
      <li><a href="/taichi?v=40">Set taichi min</a></li>
      <li><a href="/taichi?v=80">Set taichi medium</a></li>
      <li><a href="/taichi?v=255">Set taichi max</a></li>
      </ul>
    </div>
    <div class="column">
      <h2>Nose</h2>
      <ul>
      <li><a href="/nose?v=0">Off</a></li>
      <li><a href="/nose?v=1">On</a></li>
      <li><a href="/nose?v=2">Todo</a></li>
      <li><a href="/nose?v=3">Urgent</a></li>
      <li><a href="/nose?v=4">Panic</a></li>
      </ul>
    </div>
    <div class="column column-50">
      <h2>Ears</h2>
      Set <strong>left</strong> ear position:<br/>
      <a href="/left?p=0&d=0">0</a>
      <a href="/left?p=1&d=0">1</a>
      <a href="/left?p=2&d=0">2</a>
      <a href="/left?p=3&d=0">3</a>
      <a href="/left?p=4&d=0">4</a>
      <a href="/left?p=5&d=0">5</a>
      <a href="/left?p=6&d=0">6</a>
      <a href="/left?p=7&d=0">7</a>
      <a href="/left?p=8&d=0">8</a>
      <a href="/left?p=9&d=0">9</a>
      <a href="/left?p=10&d=0">10</a>
      <a href="/left?p=11&d=0">11</a>
      <a href="/left?p=12&d=0">12</a>
      <a href="/left?p=13&d=0">13</a>
      <a href="/left?p=14&d=0">14</a>
      <a href="/left?p=15&d=0">15</a>
      <a href="/left?p=16&d=0">16</a>
      <br/>
      Set <strong>right</strong> ear position:<br/>
      <a href="/right?p=0&d=0">0</a>
      <a href="/right?p=1&d=0">1</a>
      <a href="/right?p=2&d=0">2</a>
      <a href="/right?p=3&d=0">3</a>
      <a href="/right?p=4&d=0">4</a>
      <a href="/right?p=5&d=0">5</a>
      <a href="/right?p=6&d=0">6</a>
      <a href="/right?p=7&d=0">7</a>
      <a href="/right?p=8&d=0">8</a>
      <a href="/right?p=9&d=0">9</a>
      <a href="/right?p=10&d=0">10</a>
      <a href="/right?p=11&d=0">11</a>
      <a href="/right?p=12&d=0">12</a>
      <a href="/right?p=13&d=0">13</a>
      <a href="/right?p=14&d=0">14</a>
      <a href="/right?p=15&d=0">15</a>
      <a href="/right?p=16&d=0">16</a>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <h2>Info</h2>
      <ul>
      <li><a href="/clear">Info off</a></li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="column">
      <h3>Weather</h3>
      <ul>
      <li><a href="/weather?v=0">Sun</a></li>
      <li><a href="/weather?v=1">Clouds</a></li>
      <li><a href="/weather?v=2">Fog</a></li>
      <li><a href="/weather?v=3">Rain</a></li>
      <li><a href="/weather?v=4">Snow</a></li>
      <li><a href="/weather?v=5">Storm</a></li>
      </ul>
    </div>
    <div class="column">
      <h3>Stock</h3>
      <ul>
      <li><a href="/stock?v=0">---</a></li>
      <li><a href="/stock?v=1">--</a></li>
      <li><a href="/stock?v=2">-</a></li>
      <li><a href="/stock?v=3">0</a></li>
      <li><a href="/stock?v=4">+</a></li>
      <li><a href="/stock?v=5">++</a></li>
      <li><a href="/stock?v=6">+++</a></li>
      </ul>
    </div>
    <div class="column">
      <h3>Traffic</h3>
      <ul>
      <li><a href="/traffic?v=0">Free</a></li>
      <li><a href="/traffic?v=1">Okay</a></li>
      <li><a href="/traffic?v=2">Moderate</a></li>
      <li><a href="/traffic?v=3">Normal</a></li>
      <li><a href="/traffic?v=4">Heavy</a></li>
      <li><a href="/traffic?v=5">Congested</a></li>
      <li><a href="/traffic?v=6">Extreme</a></li>
      </ul>
    </div>
    <div class="column">
      <h3>Pollution</h3>
      <ul>
      <li><a href="/pollution?v=0">0</a></li>
      <li><a href="/pollution?v=1">1</a></li>
      <li><a href="/pollution?v=2">2</a></li>
      <li><a href="/pollution?v=3">3</a></li>
      <li><a href="/pollution?v=4">4</a></li>
      <li><a href="/pollution?v=5">5</a></li>
      <li><a href="/pollution?v=6">6</a></li>
      <li><a href="/pollution?v=7">7</a></li>
      <li><a href="/pollution?v=8">8</a></li>
      <li><a href="/pollution?v=9">9</a></li>
      <li><a href="/pollution?v=10">10</a></li>
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <h2>Play sound</h2>
      <ul>
      <li><a href="/communication">Communication</a></li>
      <li><a href="/ack">Ack</a></li>
      <li><a href="/abort">Abort</a></li>
      <li><a href="/ministop">Ministop</a></li>
      </ul>
    </div>
    <div class="column column-75">
      <h2>&nbsp;</h2>
      <form action="/play" method="GET">
        <fieldset>
          <label for="mp3uriField">Play MP3 file</label>
          (http only, https is not supported)
          <input type="text" name="u" id="mp3uriField" placeholder="http://ia800304.us.archive.org/14/items/SadTrombone/73581__benboncan__sad-trombone.mp3" />
          <input class="button-primary" type="submit" value="Play">
      </fieldset>
      </form>
      <form action="/say" method="GET">
        <fieldset>
          <label for="textToSpeachField">Text to speach</label>
          <input type="text" name="t" id="textToSpeachField" />
          <input class="button-primary" type="submit" value="Say">
      </fieldset>
      </form>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <h2>Util</h2>
      <ul>
      <li><a href="/surprise">Surprise</a></li>
      <li><a href="/stop">Stop everything</a></li>
      </ul>
    </div>
    <div class="column">
      <h2>Sleep</h2>
      <ul>
      <li><a href="/sleep">Sleep</a></li>
      <li><a href="/wakeup">Wake up</a></li>
      </ul>
    </div>
    <div class="column column-50">
      <h2>System</h2>
      <p>MAC Address: <strong id="macAddress"></strong></p>
      <ul>
      <li><a href="/status">Get status as JSON</a></li>
      <li><a href="/gettime">Update time from timeserver</a></li>
      <li><a href="/reboot">Reboot</a></li>
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <h2>Setup</h2>
    </div>
  </div>
  <div class="row">
    <div class="column">
      <form action="/lang" method="GET">
        <fieldset>
          <label for="langField">Language</label>
          <select name="v" id="langField">
          <option value="uk">English</option>
          <option value="it">Italian</option>
          <option value="fr">French</option>
          <option value="es">Spanish</option>
          </select>
          <input class="button-primary" type="submit" value="Set">
      </fieldset>
      </form>
    </div>
    <div class="column">
      <form action="/time" method="GET">
        <fieldset>
          <label for="timezoneField">Timezone</label>
          <select name="v" id="timezoneField">
          <option value="" selected="selected" disabled="disabled"></option>
          <option value="-720">GMT -12:00</option>
          <option value="-660">GMT -11:00</option>
          <option value="-600">GMT -10:00</option>
          <option value="-540">GMT -9:00</option>
          <option value="-480">GMT -8:00</option>
          <option value="-420">GMT -7:00</option>
          <option value="-360">GMT -6:00</option>
          <option value="-300">GMT -5:00</option>
          <option value="-240">GMT -4:00</option>
          <option value="-210">GMT -3:30</option>
          <option value="-180">GMT -3:00</option>
          <option value="-120">GMT -2:00</option>
          <option value="-60">GMT -1:00</option>
          <option value="0">GMT</option>
          <option value="60">GMT +1:00</option>
          <option value="120">GMT +2:00</option>
          <option value="180">GMT +3:00</option>
          <option value="210">GMT +3:30</option>
          <option value="240">GMT +4:00</option>
          <option value="270">GMT +4:30</option>
          <option value="300">GMT +5:00</option>
          <option value="330">GMT +5:30</option>
          <option value="345">GMT +5:45</option>
          <option value="260">GMT +6:00</option>
          <option value="420">GMT +7:00</option>
          <option value="480">GMT +8:00</option>
          <option value="540">GMT +9:00</option>
          <option value="570">GMT +9:30</option>
          <option value="600">GMT +10:00</option>
          <option value="660">GMT +11:00</option>
          <option value="720">GMT +12:00</option>
      </select>
      <input class="button-primary" type="submit" value="Set">
      </fieldset>
      </form>
    </div>
</div>
<footer class="footer">
     <a href="https://github.com/andreax79/ServerlessNabaztag" target="_blank" title="ServerlessNabaztag">github.com/andreax79/ServerlessNabaztag</a>
</footer>
<script>
async function load() {
    const response = await fetch('/status');
    const status = await response.json();
    console.log(status);
    document.getElementById("macAddress").innerHTML = status.mac;

    let langOption = document.querySelector('#langField option[value="' + status.language + '"]');
    if (langOption){
        langOption.setAttribute('selected', 'selected');
    }

    let timezoneOption = document.querySelector('#timezoneField option[value="' + status.timeoffset + '"]');
    if (timezoneOption){
        timezoneOption.setAttribute('selected', 'selected');
    }
}

load();
</script>
</body>
</html>
